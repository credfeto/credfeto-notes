[{"body":"","link":"https://notes.markridgwell.com/categories/linux/","section":"categories","title":"Linux"},{"body":"","link":"https://notes.markridgwell.com/","section":"","title":"Mark Ridgwell | Notes"},{"body":" Overriding a systemd service parameters To override systemd configuration, the primary method is using drop-in unit files, which allow you to modify specific settings without altering the original upstream unit file. This approach preserves the ability to receive updates to the original service configuration.\nOverriding a single service\u0026rsquo;s configuration To extend a service\u0026rsquo;s configuration, create a directory named service_name.service.d under /etc/systemd/system/ (e.g., /etc/systemd/system/sshd.service.d/). Within this directory, create a configuration file, typically named override.conf, or use a descriptive name like 10_RestartSec_50.conf to manage multiple overrides. The file should contain the desired settings in the appropriate section, such as [Service], and follow the same syntax as a standard unit file. For example, to change the restart delay for the sshd service, add the following to the file:\n[Service] RestartSec=50 The folders and an override file can be automatically generated by running\nsudo systemctl edit sshd.service After creating the file, reload the systemd manager configuration to apply the changes using systemctl daemon-reload. Then, restart the service with systemctl restart service_name to ensure the new settings are active.\nThe systemctl edit service_name command automates this process by creating the necessary directory and file, opening an editor for you to make changes, and ensuring the correct structure is used. This command is particularly useful as it handles the creation of the override directory and file, and the generated file includes comments to guide the user on where to place their configuration.\nOverriding global systemd settings For overriding global systemd settings defined in /etc/systemd/system.conf, a similar mechanism exists using the /etc/systemd/system.conf.d/ directory. Configuration files placed in this directory, such as 10-suppress-ctraltdel.conf, will override settings in the main system.conf file. The files in this directory are processed in lexicographic order, with higher-numbered files taking precedence if the same setting is defined multiple times. The configuration must be placed within the [Manager] section of the file.\nThis method of using drop-in files is the standard and recommended practice for customizing systemd units, as it allows for targeted changes while maintaining compatibility with package updates.\n","link":"https://notes.markridgwell.com/posts/linux/systemd-override/","section":"posts","title":"Overriding a systemd service parameters"},{"body":"","link":"https://notes.markridgwell.com/posts/","section":"posts","title":"Posts"},{"body":"","link":"https://notes.markridgwell.com/categories/systemd/","section":"categories","title":"Systemd"},{"body":"","link":"https://notes.markridgwell.com/tags/systemd/","section":"tags","title":"Systemd"},{"body":"","link":"https://notes.markridgwell.com/categories/bypassnro/","section":"categories","title":"BypassNRO"},{"body":"","link":"https://notes.markridgwell.com/tags/bypassnro/","section":"tags","title":"BypassNRO"},{"body":"","link":"https://notes.markridgwell.com/categories/setup/","section":"categories","title":"Setup"},{"body":"","link":"https://notes.markridgwell.com/tags/setup/","section":"tags","title":"Setup"},{"body":" Windows 11 setup with local account When it gets to account setup hit Shift + F10 Then in the command prompt type: start ms-cxh:localonly ","link":"https://notes.markridgwell.com/posts/windows/windows-11-local-account/","section":"posts","title":"SSH - Generating Keys"},{"body":"","link":"https://notes.markridgwell.com/categories/windows-11/","section":"categories","title":"Windows 11"},{"body":"","link":"https://notes.markridgwell.com/tags/windows-11/","section":"tags","title":"Windows 11"},{"body":"","link":"https://notes.markridgwell.com/tags/disks/","section":"tags","title":"Disks"},{"body":"","link":"https://notes.markridgwell.com/tags/exfat/","section":"tags","title":"Exfat"},{"body":" Exfat Required packages Ubuntu sudo apt install exfat-fuse exfatprogs Arch pacman -S exfatprogs Formatting mkfs.exfat -L Disk_Label /dev/sda1 ","link":"https://notes.markridgwell.com/posts/linux/exfat/","section":"posts","title":"ExFat disk format"},{"body":"","link":"https://notes.markridgwell.com/tags/background/","section":"tags","title":"Background"},{"body":"","link":"https://notes.markridgwell.com/categories/zoom/","section":"categories","title":"Zoom"},{"body":"","link":"https://notes.markridgwell.com/tags/zoom/","section":"tags","title":"Zoom"},{"body":" Zoom Changing backgrounds with flatpak zoom Select a custom background image in zoom UI\nin folder: ~/.var/app/us.zoom.Zoom/.zoom/data/VirtualBkgnd_Custom\nfind the file with the name {guid}\nreplace the file with a link\nln -s -f ~/Pictures/Backgrounds/dt-link.jpg {guid} use wallpaper script at login/logoff to change the image before zoom runs\nSee FreeCodeCamp\n","link":"https://notes.markridgwell.com/posts/zoom/changing-backgrounds/","section":"posts","title":"Zoom: Changing virtual backgrounds"},{"body":" Hardening Linux Kernel Command line options slab_nomerge slub_debug=FZ init_on_alloc=1 init_on_free=1 pti=on lsm=landlock,lockdown,yama,apparmor,bpf apparmor=1 security=apparmor lockdown=confidentiality hardened_usercopy=on ia32_emulation=0 /etc/sysctl.d/* Restrict access to dmesg dmesg_restrict.conf\nkernel.dmesg_restrict=1 Harden bpf harden_bpf.conf\nkernel.unprivileged_bpf_disabled=1 net.core.bpf_jit_harden=2 Restrict Kexec notes:\ncauses zoom to crash on start if enabled kexec.conf\nkernel.kexec_load_disabled=1 Restrict Kptr kptr_restrict.conf\nkernel.kptr_restrict=2 PTrace scope ptrace_scope.conf\nkernel.yama.ptrace_scope=2 TCP tcp_hardening.conf\nnet.ipv4.tcp_syncookies=1 net.ipv4.tcp_rfc1337=1 net.ipv4.conf.default.rp_filter=1 net.ipv4.conf.all.rp_filter=1 net.ipv4.conf.all.accept_redirects=0 net.ipv4.conf.default.accept_redirects=0 net.ipv4.conf.all.secure_redirects=0 net.ipv4.conf.default.secure_redirects=0 net.ipv6.conf.all.accept_redirects=0 net.ipv6.conf.default.accept_redirects=0 net.ipv4.conf.all.send_redirects=0 net.ipv4.conf.default.send_redirects=0 net.ipv4.icmp_echo_ignore_all=1 Unprivileged users namespace clone Notes:\ndoes not work with zoom does not work with docker unprivileged_users_clone.conf\nkernel.unprivileged_userns_clone=1 ","link":"https://notes.markridgwell.com/posts/linux/hardening/","section":"posts","title":"Hardening linux"},{"body":"","link":"https://notes.markridgwell.com/tags/lsblk/","section":"tags","title":"Lsblk"},{"body":" Using Node Version Manager Install yay -Sy nvm Install Latest node nvm install node Install a specific version of node nvm install 18.9.0 Switch to a specific version of node nvm use 18.9.0 ","link":"https://notes.markridgwell.com/posts/nodejs/nvm/","section":"posts","title":"Node Version Manager"},{"body":"","link":"https://notes.markridgwell.com/categories/nodejs/","section":"categories","title":"Nodejs"},{"body":"","link":"https://notes.markridgwell.com/tags/nodejs/","section":"tags","title":"Nodejs"},{"body":"","link":"https://notes.markridgwell.com/categories/nvm/","section":"categories","title":"Nvm"},{"body":"","link":"https://notes.markridgwell.com/tags/nvm/","section":"tags","title":"Nvm"},{"body":"","link":"https://notes.markridgwell.com/categories/socketsecurity/","section":"categories","title":"Socketsecurity"},{"body":"","link":"https://notes.markridgwell.com/tags/socketsecurity/","section":"tags","title":"Socketsecurity"},{"body":"","link":"https://notes.markridgwell.com/categories/typescript/","section":"categories","title":"Typescript"},{"body":"","link":"https://notes.markridgwell.com/tags/typescript/","section":"tags","title":"Typescript"},{"body":" Socket Security Cli Wrapper for NPM and NPX to check security of the packages on install\nInstall npm install -g @socketsecurity/cli See also Socket.dev\n","link":"https://notes.markridgwell.com/posts/nodejs/socketsecurity/","section":"posts","title":"Using Socket security CLI"},{"body":"","link":"https://notes.markridgwell.com/categories/aws/","section":"categories","title":"AWS"},{"body":"","link":"https://notes.markridgwell.com/tags/btrfs/","section":"tags","title":"Btrfs"},{"body":"","link":"https://notes.markridgwell.com/tags/disk/","section":"tags","title":"Disk"},{"body":"","link":"https://notes.markridgwell.com/categories/ec2/","section":"categories","title":"EC2"},{"body":" Extending partition See Aws\nResize partition sudo growpart /dev/nvme0n1 1 Resize filesystem Resize EXT4 in a partition sudo resize2fs /dev/nvme0n1p1 Resize XFS in a partition Where / is the mountpoint\nsudo xfs_growfs -d / Resize BTRFS in a partition Where / is the mountpoint\nsudo btrfs filesystem resize +10g / ","link":"https://notes.markridgwell.com/posts/linux/extend-partition/","section":"posts","title":"Extending Partition"},{"body":"","link":"https://notes.markridgwell.com/tags/growpart/","section":"tags","title":"Growpart"},{"body":"","link":"https://notes.markridgwell.com/tags/resize2fs/","section":"tags","title":"Resize2fs"},{"body":"","link":"https://notes.markridgwell.com/tags/xfs_growfs/","section":"tags","title":"Xfs_growfs"},{"body":" List block devices with mountpoints and labels. sudo lsblk -o name,mountpoint,label,size,uuid ","link":"https://notes.markridgwell.com/posts/linux/lsblk/","section":"posts","title":"lsblk"},{"body":" Configuring firejail Installing yay -Sy firejail firejail-handler-extra firejail-handler-http firejail-pacman-hook Removing yay -R firejail firejail-handler-extra firejail-handler-http firejail-pacman-hook Excluding a program from firejail config edit /etc/firejail/firecfg.config and comment out the name of the program\nnote zoom normally needs removing as it has issues\nSpecial cases SSH ~/.config/firejail/ssh.local\nwhitelist ${RUNUSER}/ssh-agent.* Spectacle (Wayland) /etc/pacman.d/hooks/unjail-spectacle.hook\n[Trigger] Operation = Upgrade Operation = Install Operation = Remove Type = Package Target = firejail [Action] Description = Removing spectacle from jail When = PostTransaction Exec = /usr/bin/rm -f /home/markr/.local/share/applications/org.kde.spectacle.desktop ","link":"https://notes.markridgwell.com/posts/linux/firejail/","section":"posts","title":"Configuring firejail"},{"body":"","link":"https://notes.markridgwell.com/tags/firejail/","section":"tags","title":"Firejail"},{"body":"","link":"https://notes.markridgwell.com/tags/sandbox/","section":"tags","title":"Sandbox"},{"body":"","link":"https://notes.markridgwell.com/tags/bash/","section":"tags","title":"Bash"},{"body":"","link":"https://notes.markridgwell.com/tags/dash/","section":"tags","title":"Dash"},{"body":" Installing Dash Install the dash shell as default shell over bash on arch.\nyay -Sy dash dashbinsh Install script to check bash-isms in scripts that claim to be posix shell compatible.\nyay -Sy checkbashisms ","link":"https://notes.markridgwell.com/posts/linux/scripting/","section":"posts","title":"Scripting"},{"body":" Configuring locale Based on Chris Titus Gist but changed for GB\necho \u0026#34;LC_ALL=en_GB.UTF-8\u0026#34; | sudo tee -a /etc/environment echo \u0026#34;en_GB.UTF-8 UTF-8\u0026#34; | sudo tee -a /etc/locale.gen echo \u0026#34;LANG=en_GB.UTF-8\u0026#34; | sudo tee -a /etc/locale.conf sudo locale-gen en_GB.UTF-8 ","link":"https://notes.markridgwell.com/posts/linux/locale/","section":"posts","title":"Configuring locale"},{"body":"","link":"https://notes.markridgwell.com/tags/locale/","section":"tags","title":"Locale"},{"body":" Configuring firewall with UFW See Also\nSet default policy\nsudo ufw default deny incoming sudo ufw default allow outgoing Allow SSH\nsudo ufw allow ssh Enable\nsudo ufw enable sudo systemctl enable --now ufw Status\nsudo ufw status verbose ","link":"https://notes.markridgwell.com/posts/linux/firewall/","section":"posts","title":"Configuring firewall with UFW"},{"body":"","link":"https://notes.markridgwell.com/tags/firewall/","section":"tags","title":"Firewall"},{"body":"","link":"https://notes.markridgwell.com/tags/octopus/","section":"tags","title":"Octopus"},{"body":" Installing polling octopus tentacle on arch See\nRequired packages acl - for setfacl (should be installed for systemd already) inetutils - for hostname pacman -Sy acl inetutils Linux X64 As root\nwget https://octopus.com/downloads/latest/Linux_x64TarGz/OctopusTentacle -O tentacle-linux_x64.tar.gz mkdir /opt/octopus tar xvzf tentacle-linux_x65.tar.gz -C /opt/octopus # Follow the prompts in /opt/octopus/tentacle/configure-tentacle.sh /opt/octopus/tentacle/Tentacle service --install --start Linux ARM64 As root\nwget https://octopus.com/downloads/latest/Linux_arm64TarGz/OctopusTentacle -O tentacle-linux_arm64.tar.gz mkdir /opt/octopus tar xvzf tentacle-linux_arm64.tar.gz -C /opt/octopus # Follow the prompts in /opt/octopus/tentacle/configure-tentacle.sh /opt/octopus/tentacle/Tentacle service --install --start For each service useradd \u0026lt;serviceuser\u0026gt; ","link":"https://notes.markridgwell.com/posts/linux/octopus/","section":"posts","title":"Octopus tentacle install arch"},{"body":"","link":"https://notes.markridgwell.com/tags/tendacle/","section":"tags","title":"Tendacle"},{"body":"","link":"https://notes.markridgwell.com/tags/dd/","section":"tags","title":"DD"},{"body":" Cloning disk Cloning physical disk copy all on /dev/nvme0n1 to /dev/sda showing progress\ndd if=/dev/nvme0n1 of=/dev/sda bs=64k status=progress Copying ISO to disk dd if=example.iso of=/dev/sda bs=64k status=progress ","link":"https://notes.markridgwell.com/posts/linux/clone-disk/","section":"posts","title":"Disk Cloning"},{"body":"","link":"https://notes.markridgwell.com/tags/brave/","section":"tags","title":"Brave"},{"body":"","link":"https://notes.markridgwell.com/tags/chrome/","section":"tags","title":"Chrome"},{"body":"","link":"https://notes.markridgwell.com/tags/firefox/","section":"tags","title":"FireFox"},{"body":" Fixing spectable screenshot issues on Wayland Firefox edit /etc/profiles.d/wayland.md\n#! /bin/bash export MOZ_ENABLE_WAYLAND=1 Chrome/Brave Chrome: Go to chrome://flags#ozone-platform-hint Brave: Go to brave://flags#ozone-platform-hint Switch \u0026ldquo;Preferred Ozone platform\u0026rdquo; to \u0026ldquo;Auto\u0026rdquo;\nDiscord Docs say change the launch command to use\ndiscord --enable-features=UseOzonePlatform --ozone-platform=wayland however gertting core dump\nCurrently working\ndiscord --disable-gpu-sandbox ","link":"https://notes.markridgwell.com/posts/linux/force-x11-apps-to-wayland/","section":"posts","title":"Forcing usage of wayland over xwayland"},{"body":"","link":"https://notes.markridgwell.com/tags/wayland/","section":"tags","title":"Wayland"},{"body":"","link":"https://notes.markridgwell.com/tags/screenshot/","section":"tags","title":"Screenshot"},{"body":" Fixing spectable screenshot issues on Wayland Can\u0026rsquo;t take screenshot with Spectacle Screenshot request failed: \u0026#34;The process is not authorized to take a screenshot\u0026#34; qt.qpa.wayland: Wayland does not support QWindow::requestActivate() fix:\nrm ~/.local/share/applications/org.kde.spectacle.desktop then restart spectable\n","link":"https://notes.markridgwell.com/posts/linux/spectacle-wayland/","section":"posts","title":"Spectacle wayland"},{"body":"","link":"https://notes.markridgwell.com/tags/debian/","section":"tags","title":"Debian"},{"body":"","link":"https://notes.markridgwell.com/tags/flathub/","section":"tags","title":"Flathub"},{"body":"","link":"https://notes.markridgwell.com/tags/flatpak/","section":"tags","title":"Flatpak"},{"body":"","link":"https://notes.markridgwell.com/tags/package-management/","section":"tags","title":"Package Management"},{"body":" Package Management - Arch Removing unused packages List what is unused\npacman -Qdtq Remove all unused\npacman -Qdtq | sudo pacman -Rs - Remove multi-lib packages:\npacman -R `LANG=C pacman -Sl multilib | grep installed | cut -d \u0026#39; \u0026#39; -f 2` Once done edit /etc/pacman.conf and comment out the ``[multilib]` section\nRe-install all packages (not AUR)\npacman -Qqn | sudo pacman -S - Re-install all AUR packages\nyay -Sy --rebuildtree --rebuildall $(pacman -Qqme) Use Reflector to find the fastest 20 mirrors in the specifiec country\nsudo reflector --latest 20 --protocol https --sort rate --save /etc/pacman.d/mirrorlist --country gb`` Install reflector with pacman hook\nyay -S reflector reflector-pacman-hook-git Edit /etc/xdg/reflector/reflector.conf to configure reflector update\nEnable reflector to be run at startup (also can enable reflector.timer to run weekly)\nsudo systemctl enable --now reflector.service ","link":"https://notes.markridgwell.com/posts/linux/package-management-arch/","section":"posts","title":"Package Management - Arch"},{"body":" Package Management - Debian/Ubuntu Removing unused packages apt autoremove ","link":"https://notes.markridgwell.com/posts/linux/package-management-debian/","section":"posts","title":"Package Management - Debian/Ubuntu"},{"body":" Package Management - Flatpak Only allow flathub verified apps to run flatpak remote-add --if-not-exists --subset=verified flathub-verified https://flathub.org/repo/flathub.flatpakrepo flatpak remote-delete flathub note when removing this will prompt to remove all installed apps\nAllow whitelisted packages git clone git@github.com:credfeto/credfeto-flatpak-filter.git sudo flatpak remote-add --if-not-exists --filter=/home/markr/work/personal/credfeto-flatpak-filter/flatpak.filter flathub-whitelist https://flathub.org/repo/flathub.flatpakrepo Downgrading flatpack packages Based on\nGet versions of installed package\nflatpak remote-info --log flathub-verified us.zoom.Zoom sudo flatpak update --commit=\u0026lt;commit_hash\u0026gt; \u0026lt;Application ID\u0026gt; Preventing package from being updated Mask package\nsudo flatpak mask us.zoom.Zoom Un-Mask package\nsudo flatpak mask us.zoom.Zoom --remove ","link":"https://notes.markridgwell.com/posts/linux/package-management-flatpak/","section":"posts","title":"Package Management - Flatpak"},{"body":"","link":"https://notes.markridgwell.com/tags/pacman/","section":"tags","title":"Pacman"},{"body":"","link":"https://notes.markridgwell.com/tags/ubuntu/","section":"tags","title":"Ubuntu"},{"body":" Logrotate logotate.conf by default is set up to rotate logs once a week and keep for 4 weeks. Compression isn\u0026rsquo;t enabled by default. This doesn\u0026rsquo;t work well with small disks with services that are verbose with what is logged. This sets the default configuration so that it is better suited.\nnote that per service configurations in /etc/logrotate.d/ may also need adjusting.\nSee ArchWiki\nnote using a file 01-defaults in logrotate.d means that don\u0026rsquo;t need to worry about updates rewriting the logrotate.conf file\n/etc/logrotate.d/01-defaults:\n# rotate log files daily daily # keep 2 weeks worth of backlogs rotate 14 # restrict maximum size of log files size 10M # create new (empty) log files after rotating old ones create # uncomment this if you want your log files compressed compress compresscmd /usr/bin/zstd compressext .zst # maximum compression (uses more memory) compressoptions -T0 --long --ultra -22 uncompresscmd /usr/bin/unzstd ","link":"https://notes.markridgwell.com/posts/linux/logrotate/","section":"posts","title":"Logrotate"},{"body":"","link":"https://notes.markridgwell.com/tags/logrotate/","section":"tags","title":"Logrotate"},{"body":"","link":"https://notes.markridgwell.com/tags/jest/","section":"tags","title":"Jest"},{"body":"","link":"https://notes.markridgwell.com/categories/webstorm/","section":"categories","title":"Webstorm"},{"body":" Webstorm - fixing jest When this error appears on opening new project\n● Test suite failed to run Jest encountered an unexpected token Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax. Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration. By default \u0026#34;node_modules\u0026#34; folder is ignored by transformers. Here\u0026#39;s what you can do: • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it. • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript • To have some of your \u0026#34;node_modules\u0026#34; files transformed, you can specify a custom \u0026#34;transformIgnorePatterns\u0026#34; in your config. • If you need a custom transformation specify a \u0026#34;transform\u0026#34; option in your config. • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \u0026#34;moduleNameMapper\u0026#34; config option. You\u0026#39;ll find more details and examples of these config options in the docs: https://jestjs.io/docs/configuration Edit Run configuration and set the configuration file for jest to point to the one in the project:\n","link":"https://notes.markridgwell.com/posts/typescript/webstorm-jest/","section":"posts","title":"WebStorm fix jest"},{"body":"","link":"https://notes.markridgwell.com/categories/docker/","section":"categories","title":"Docker"},{"body":" Docker Remove unused images, containers and configuration all stopped containers all networks not used by at least one container all dangling images all dangling build cache docker system prune Remove unused images all dangling images docker image prune ","link":"https://notes.markridgwell.com/posts/docker/remove-old-images/","section":"posts","title":"Docker remove images"},{"body":"","link":"https://notes.markridgwell.com/tags/dokcer/","section":"tags","title":"Dokcer"},{"body":" Correct Keyboard layout See\nxmodmap -e \u0026#39;keycode 49 = grave\u0026#39; ","link":"https://notes.markridgwell.com/posts/linux/keyboard-layout/","section":"posts","title":"Correcting keyboard layout"},{"body":"","link":"https://notes.markridgwell.com/tags/keyboard/","section":"tags","title":"Keyboard"},{"body":"","link":"https://notes.markridgwell.com/tags/mssql/","section":"tags","title":"MSSQL"},{"body":"## Create Login to SQL Server ```sql CREATE LOGIN reports WITH PASSWORD = \u0026#39;somethingsecure\u0026#39;, CHECK_EXPIRATION = ON Change SQL Server password alter login reports with password = \u0026#39;secure password\u0026#39; Grant rights to a user in db use [Database-name] GO -- add DB user CREATE USER [Reports-User] FROM LOGIN [reports] GO -- map that user to a role in the db EXEC sp_addrolemember \u0026#39;reports\u0026#39;, \u0026#39;Reports-User\u0026#39;; GO ","link":"https://notes.markridgwell.com/posts/sql/mssql/login-user/","section":"posts","title":"MSSQL Granting access"},{"body":"","link":"https://notes.markridgwell.com/tags/postgresql/","section":"tags","title":"Postgresql"},{"body":" Create Login to SQL Server CREATE ROLE my_user LOGIN PASSWORD \u0026#39;my_password\u0026#39;; Grant access to database GRANT CONNECT ON DATABASE my_db TO my_user; Granting basic read/write GRANT pg_read_all_data TO my_user; GRANT pg_write_all_data TO my_user; Granting access to a schema in a db GRANT USAGE ON SCHEMA public TO my_user; Change DB owner ALTER DATABASE name OWNER TO new_owner; ","link":"https://notes.markridgwell.com/posts/sql/postgres/login-user/","section":"posts","title":"Postgresql Granting access"},{"body":"","link":"https://notes.markridgwell.com/tags/security/","section":"tags","title":"Security"},{"body":"","link":"https://notes.markridgwell.com/categories/sql/","section":"categories","title":"SQL"},{"body":" AWS RDS SQL Backup RDS to S3 backup and restore documentation exec msdb.dbo.rds_backup_database @source_db_name=\u0026#39;database_name\u0026#39;, @s3_arn_to_backup_to=\u0026#39;arn:aws:s3:::bucket_name/file_name_and_extension\u0026#39;, @overwrite_S3_backup_file=1; Restore from S3 exec msdb.dbo.rds_restore_database @restore_db_name=\u0026#39;database_name\u0026#39;, @s3_arn_to_restore_from=\u0026#39;arn:aws:s3:::bucket_name/file_name_and_extension\u0026#39;; Check RDS Status exec msdb.dbo.rds_task_status @db_name=\u0026#39;database_name\u0026#39; ","link":"https://notes.markridgwell.com/posts/aws/rds/","section":"posts","title":"AWS RDS SQL"},{"body":"","link":"https://notes.markridgwell.com/categories/mssql/","section":"categories","title":"MSSQL"},{"body":"","link":"https://notes.markridgwell.com/tags/rds/","section":"tags","title":"RDS"},{"body":" Take DB offline USE [master] GO ALTER DATABASE [MyDatabase] SET OFFLINE GO ","link":"https://notes.markridgwell.com/posts/sql/mssql/offline/","section":"posts","title":"Taking MSSQL DB offline"},{"body":"","link":"https://notes.markridgwell.com/tags/dynamic-dns/","section":"tags","title":"Dynamic DNS"},{"body":" Dynamic DNS with ddclient sudo apt-get install ddclient libdata-validate-ip-perl libjson-any-perl net-tools Edit /etc/ddclient.conf as:\ndaemon=1800 syslog=yes protocol=cloudflare use=web web=checkip.dyndns.org/ 6 web-skip=‘IP Address’ ssl=yes login=\u0026lt;Cloudflare Login\u0026gt; password=\u0026lt;APIKEY\u0026gt; zone=example.com host.example.com Verify config\nsudo service ddclient status sudo ddclient -query sudo ddclient -daemon=0 -verbose -noquiet Enable Service\nsudo service ddclient status Set Hostname sudo hostnamectl set-hostname whatever.example.com ","link":"https://notes.markridgwell.com/posts/linux/dynamic-dns-with-ddclient/","section":"posts","title":"Dynamic DNS with DDClient"},{"body":" Check for ignored files that are checked into git git ls-files | grep -v server\\.pfx | grep -v \\.gitignore | git check-ignore --stdin -v --no-index ","link":"https://notes.markridgwell.com/posts/git/finding-ignored-files/","section":"posts","title":"Check for ignored files that are committed to git"},{"body":"","link":"https://notes.markridgwell.com/tags/development/","section":"tags","title":"Development"},{"body":"","link":"https://notes.markridgwell.com/categories/git/","section":"categories","title":"Git"},{"body":"","link":"https://notes.markridgwell.com/tags/gpg/","section":"tags","title":"GPG"},{"body":" GPG List Keys gpg --list-keys Export Key However, you may not want to bring all that trust data and lots of keys with you. If you\u0026rsquo;d just like to copy your keys over, first export them (as usual, we assume gpg is in your path):\ngpg --export-secret-keys -a keyid \u0026gt; my_private_key.asc gpg --export -a keyid \u0026gt; my_public_key.asc Where keyid is your PGP Key ID, such as A1E732BB. Take the the two files, securely copy them to the new machine (it is unadvisable to ftp them or use plain-text protocols because even thought your private key there is encrypted with your passphrase, your passphrase is still the weakest link, and you want to avoid exposure to your private key wherever possible).\nImport Key gpg --import my_private_key.asc gpg --import my_public_key.asc ","link":"https://notes.markridgwell.com/posts/gpg/managing-keys/","section":"posts","title":"GPG - managing keys"},{"body":"","link":"https://notes.markridgwell.com/categories/security/","section":"categories","title":"Security"},{"body":"","link":"https://notes.markridgwell.com/tags/blockchain/","section":"tags","title":"Blockchain"},{"body":"","link":"https://notes.markridgwell.com/categories/ethereum/","section":"categories","title":"Ethereum"},{"body":"","link":"https://notes.markridgwell.com/tags/ethereum/","section":"tags","title":"Ethereum"},{"body":"","link":"https://notes.markridgwell.com/categories/geth/","section":"categories","title":"Geth"},{"body":" Geth Node list peers: admin.peers Node Info: admin.nodeInfo Sealers list sealers clique.getSigners() list propositions: clique.proposals discard a proposition: clique.discard(\u0026quot;0x1234234234234\u0026quot;) add a new sealer: clique.propose(\u0026quot;0x1234243214312\u0026quot;, true) remove a sealer: clique.propose(\u0026quot;0x1234243214312\u0026quot;, false) Generate toml file geth --datadir ./chain --nat extip:182.168.1.2 dumpconfig echo \u0026gt; config.toml ","link":"https://notes.markridgwell.com/posts/ethereum/geth/","section":"posts","title":"Geth"},{"body":"","link":"https://notes.markridgwell.com/categories/ssh/","section":"categories","title":"SSH"},{"body":"","link":"https://notes.markridgwell.com/tags/ssh/","section":"tags","title":"SSH"},{"body":" SSH Generate an elliptic curve key See https://blog.g3rt.nl/upgrade-your-ssh-keys.html\nssh-keygen -o -a 100 -t ed25519 e.g. using a large number of rounds\nssh-keygen -o -a 1000000000 -t ed25519 -f d:\\test_ed Proxy RDP over ssh Start SSH:\nssh mark@sshbox -L 9000:machine-to-remote-to:3389 Where:\n\u0026lsquo;sshbox\u0026rsquo; is the SSH Proxy 9000 is the local port Connect:\nmstsc /v:localhost:9000 Generate a key compatible with TeamCity Teamcity requires keys to be in a specific format\nssh-keygen -t rsa -m PEM -f id_project Server Setup /etc/ssh/sshd_config.d/999-security.conf\n# Only allow latest SSH protocol Protocol 2 # Ensure root login is disabled PermitRootLogin no # Don\u0026#39;t trust ~/.ssh/authorized_keys HostBasedAuthentication no # Ignore RHosts and Shosts IgnoreRHosts yes # no blank passwords PermitEmptyPasswords no # Limit auth retries MaxAuthTries 3 # For example, a user can set a variable to have a process execute a malicious package PermitUserEnvironment no # use PAM not password files UsePAM yes # No X11 forwarding X11Forwarding no # Don\u0026#39;t allow port forwarding AllowTcpForwarding no User setup Enable SSHd agent\nsystetmctl enable --user --now sshd-agent note if using firejail andd ssh-agent then make sure it has been whitelisted\nwhitelist $XDG_RUNTIME_DIR/ssh-agent.socket Add private key to agent\nssh-add \u0026#39;private_key\u0026#39; ","link":"https://notes.markridgwell.com/posts/ssh/generating-keys/","section":"posts","title":"SSH - Generating Keys"}]