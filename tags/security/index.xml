<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Security on Mark Ridgwell | Notes</title><link>https://notes.markridgwell.com/tags/security/</link><description>Recent content in Security on Mark Ridgwell | Notes</description><generator>Hugo</generator><language>en</language><lastBuildDate>Mon, 12 Aug 2024 14:35:58 +0100</lastBuildDate><atom:link href="https://notes.markridgwell.com/tags/security/index.xml" rel="self" type="application/rss+xml"/><item><title>MSSQL Granting access</title><link>https://notes.markridgwell.com/posts/sql/mssql/login-user/</link><pubDate>Sun, 15 Jan 2023 08:47:11 +0100</pubDate><guid>https://notes.markridgwell.com/posts/sql/mssql/login-user/</guid><description>&lt;pre tabindex="0"&gt;&lt;code&gt;## Create Login to SQL Server

```sql
CREATE LOGIN reports WITH PASSWORD = &amp;#39;somethingsecure&amp;#39;, CHECK_EXPIRATION = ON
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="change-sql-server-password" class=link_owner&gt;
 Change SQL Server password
 &lt;a href="#change-sql-server-password" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;alter&lt;/span&gt; login reports &lt;span style="color:#66d9ef"&gt;with&lt;/span&gt; password &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;secure password&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="grant-rights-to-a-user-in-db" class=link_owner&gt;
 Grant rights to a user in db
 &lt;a href="#grant-rights-to-a-user-in-db" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;use [&lt;span style="color:#66d9ef"&gt;Database&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&lt;/span&gt;name]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GO&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;-- add DB user
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;CREATE&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;USER&lt;/span&gt; [Reports&lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;User&lt;/span&gt;] &lt;span style="color:#66d9ef"&gt;FROM&lt;/span&gt; LOGIN [reports]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GO&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;-- map that user to a role in the db
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;EXEC&lt;/span&gt; sp_addrolemember &lt;span style="color:#e6db74"&gt;&amp;#39;reports&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;Reports-User&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GO&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Postgresql Granting access</title><link>https://notes.markridgwell.com/posts/sql/postgres/login-user/</link><pubDate>Sun, 15 Jan 2023 08:47:11 +0100</pubDate><guid>https://notes.markridgwell.com/posts/sql/postgres/login-user/</guid><description>&lt;h2 id="create-login-to-sql-server" class=link_owner&gt;
 Create Login to SQL Server
 &lt;a href="#create-login-to-sql-server" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;CREATE&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;ROLE&lt;/span&gt; my_user LOGIN PASSWORD &lt;span style="color:#e6db74"&gt;&amp;#39;my_password&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="grant-access-to-database" class=link_owner&gt;
 Grant access to database
 &lt;a href="#grant-access-to-database" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GRANT&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;CONNECT&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;ON&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;DATABASE&lt;/span&gt; my_db &lt;span style="color:#66d9ef"&gt;TO&lt;/span&gt; my_user;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="granting-basic-readwrite" class=link_owner&gt;
 Granting basic read/write
 &lt;a href="#granting-basic-readwrite" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GRANT&lt;/span&gt; pg_read_all_data &lt;span style="color:#66d9ef"&gt;TO&lt;/span&gt; my_user;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GRANT&lt;/span&gt; pg_write_all_data &lt;span style="color:#66d9ef"&gt;TO&lt;/span&gt; my_user;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="granting-access-to-a-schema-in-a-db" class=link_owner&gt;
 Granting access to a schema in a db
 &lt;a href="#granting-access-to-a-schema-in-a-db" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GRANT&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;USAGE&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;ON&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;SCHEMA&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;TO&lt;/span&gt; my_user;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="change-db-owner" class=link_owner&gt;
 Change DB owner
 &lt;a href="#change-db-owner" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;ALTER&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;DATABASE&lt;/span&gt; name &lt;span style="color:#66d9ef"&gt;OWNER&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;TO&lt;/span&gt; new_owner;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Taking MSSQL DB offline</title><link>https://notes.markridgwell.com/posts/sql/mssql/offline/</link><pubDate>Mon, 05 Dec 2022 08:47:11 +0100</pubDate><guid>https://notes.markridgwell.com/posts/sql/mssql/offline/</guid><description>&lt;h1 id="take-db-offline" class=link_owner&gt;
 Take DB offline
 &lt;a href="#take-db-offline" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;USE [master]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GO&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;ALTER&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;DATABASE&lt;/span&gt; [MyDatabase] &lt;span style="color:#66d9ef"&gt;SET&lt;/span&gt; OFFLINE
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;GO&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>GPG - managing keys</title><link>https://notes.markridgwell.com/posts/gpg/managing-keys/</link><pubDate>Wed, 12 Jan 2022 08:47:11 +0100</pubDate><guid>https://notes.markridgwell.com/posts/gpg/managing-keys/</guid><description>&lt;h1 id="gpg" class=link_owner&gt;
 GPG
 &lt;a href="#gpg" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h1&gt;
&lt;h2 id="list-keys" class=link_owner&gt;
 List Keys
 &lt;a href="#list-keys" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gpg --list-keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="export-key" class=link_owner&gt;
 Export Key
 &lt;a href="#export-key" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;However, you may not want to bring all that trust data and lots of keys with you. If you&amp;rsquo;d just like to copy your keys over, first export them (as usual, we assume gpg is in your path):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gpg --export-secret-keys -a keyid &amp;gt; my_private_key.asc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gpg --export -a keyid &amp;gt; my_public_key.asc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Where keyid is your PGP Key ID, such as A1E732BB. Take the the two files, securely copy them to the new machine (it is unadvisable to ftp them or use plain-text protocols because even thought your private key there is encrypted with your passphrase, your passphrase is still the weakest link, and you want to avoid exposure to your private key wherever possible).&lt;/p&gt;</description></item><item><title>SSH - Generating Keys</title><link>https://notes.markridgwell.com/posts/ssh/generating-keys/</link><pubDate>Sun, 26 Mar 2017 08:47:11 +0100</pubDate><guid>https://notes.markridgwell.com/posts/ssh/generating-keys/</guid><description>&lt;h1 id="ssh" class=link_owner&gt;
 SSH
 &lt;a href="#ssh" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h1&gt;
&lt;h2 id="generate-an-elliptic-curve-key" class=link_owner&gt;
 Generate an elliptic curve key
 &lt;a href="#generate-an-elliptic-curve-key" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;See &lt;a href="https://blog.g3rt.nl/upgrade-your-ssh-keys.html"&gt;https://blog.g3rt.nl/upgrade-your-ssh-keys.html&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh-keygen -o -a &lt;span style="color:#ae81ff"&gt;100&lt;/span&gt; -t ed25519
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;e.g. using a large number of rounds&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh-keygen -o -a &lt;span style="color:#ae81ff"&gt;1000000000&lt;/span&gt; -t ed25519 -f d:&lt;span style="color:#ae81ff"&gt;\t&lt;/span&gt;est_ed
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="proxy-rdp-over-ssh" class=link_owner&gt;
 Proxy RDP over ssh
 &lt;a href="#proxy-rdp-over-ssh" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Start SSH:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh mark@sshbox -L 9000:machine-to-remote-to:3389
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Where:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;lsquo;sshbox&amp;rsquo; is the SSH Proxy&lt;/li&gt;
&lt;li&gt;9000 is the local port&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Connect:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mstsc /v:localhost:9000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="generate-a-key-compatible-with-teamcity" class=link_owner&gt;
 Generate a key compatible with TeamCity
 &lt;a href="#generate-a-key-compatible-with-teamcity" class="link icon"&gt;
 &lt;svg&gt;
 &lt;use xlink:href="#anchor-link"&gt;&lt;/use&gt;
 &lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Teamcity requires keys to be in a specific format&lt;/p&gt;</description></item></channel></rss>